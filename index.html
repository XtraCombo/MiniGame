<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
<title>Mini Game - Kucing Lapar</title>
<style>
body {
  margin:0;
  display:flex;
  align-items:center;
  justify-content:center;
  height:100vh;
  background:#f5f5f5;
  font-family:sans-serif;
  overflow:hidden;
}
canvas {
  background:#d0f0ff;
  border:3px solid #333;
  border-radius:16px;
  box-shadow:0 6px 20px rgba(0,0,0,.25);
  position:relative;
}
#overlay {
  position:absolute;
  top:0; left:0; right:0; bottom:0;
  display:flex;
  align-items:center;
  justify-content:center;
  background:rgba(0,0,0,.6);
  color:#fff;
  font-size:22px;
  flex-direction:column;
}
button {
  margin-top:10px;
  padding:8px 14px;
  border:none;
  border-radius:8px;
  cursor:pointer;
  background:#fff;
  color:#333;
  font-weight:bold;
}
.shake {
  animation:shake 0.3s;
}
@keyframes shake {
  0% {transform:translate(5px,0);}
  25% {transform:translate(-5px,0);}
  50% {transform:translate(5px,0);}
  75% {transform:translate(-5px,0);}
  100% {transform:translate(0,0);}
}
</style>
</head>
<body>
<canvas id="game" width="400" height="600"></canvas>
<div id="overlay">
  <div id="msg">Kucing Lapar üê±<br/>Klik/tap buat mulai!</div>
  <button onclick="startGame()">Mulai</button>
</div>
<audio id="bgm" loop src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3"></audio>
<audio id="eatSound" src="https://www.soundjay.com/button/sounds/button-3.mp3"></audio>
<audio id="hitSound" src="https://www.soundjay.com/button/sounds/button-10.mp3"></audio>
<audio id="comboSound" src="https://www.soundjay.com/button/sounds/button-09.mp3"></audio>
<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
const bgm = document.getElementById("bgm");
const eatSound = document.getElementById("eatSound");
const hitSound = document.getElementById("hitSound");
const comboSound = document.getElementById("comboSound");
comboSound.preload = "auto";

// HD Cat Image dari Openclipart
const catImage = new Image();
catImage.src = "https://openclipart.org/download/231967/blackcat.svg"; // HD PNG/Vector

let foods = [], score=0, lives=3, running=false, level=1, bosses=[], bombs=[], particles=[], scoreAnims=[];
const cat = {x:200,y:550,w:60,h:60,shield:false,shieldTimer:0,speed:6,speedBoost:false,speedTimer:0};

function startGame(){
  score=0; lives=3; foods=[]; bosses=[]; bombs=[]; particles=[]; scoreAnims=[]; running=true; level=1;
  cat.shield=false; cat.shieldTimer=0; cat.speedBoost=false; cat.speedTimer=0; cat.speed=6;
  document.getElementById("overlay").style.display="none";
  bgm.play();
  loop();
}

function spawnFood(){
  const items=[
    {emoji:"üç£",type:"point",points:1,life:0},
    {emoji:"ü•õ",type:"life",points:0,life:1},
    {emoji:"‚≠ê",type:"point",points:5,life:0},
    {emoji:"üíÄ",type:"bad",points:-2,life:-1},
    {emoji:"üçâ",type:"point",points:3,life:0},
    {emoji:"üå∂Ô∏è",type:"bad",points:-1,life:-1},
  ];
  if(Math.random()<0.07) items.push({emoji:"üõ°Ô∏è",type:"shield",points:0,life:0});
  if(Math.random()<0.05) items.push({emoji:"‚ö°",type:"speed",points:0,life:0});

  const item = items[Math.floor(Math.random()*items.length)];
  foods.push({x:Math.random()*340,y:-40,speed:2+Math.random()*2+level*0.2,...item});
}

function spawnBoss(){ bosses.push({x:Math.random()*340,y:-60,w:60,h:60,speed:2+level*0.3,emoji:"üê∂"}); }
function spawnBomb(){ bombs.push({x:Math.random()*360,y:-40,speed:2+Math.random()*2+level*0.2,emoji:"üí£"}); }

function spawnParticles(x,y,type){
  let symbol;
  if(type==="life") symbol="‚ù§Ô∏è";
  else if(type==="gold"||type==="point") symbol="‚ú®";
  else if(type==="bad"||type==="hit"||type==="bomb") symbol="üí•";
  else if(type==="shield") symbol="üõ°Ô∏è";
  else if(type==="speed") symbol="‚ö°";
  else symbol="üç¥";
  for(let i=0;i<8;i++){
    particles.push({x,y,symbol,dx:(Math.random()-0.5)*4,dy:(Math.random()-1)*4,life:30});
  }
}

function spawnScoreAnim(x,y,text){ scoreAnims.push({x,y,text,life:50}); }
function update(){
  if(Math.random()<0.03+level*0.005) spawnFood();
  if(level>1 && bombs.length<Math.floor(level/3)){ if(Math.random()<0.005) spawnBomb(); }
  for(const f of foods) f.y+=f.speed;
  for(const b of bombs) b.y+=b.speed;
  foods=foods.filter(f=>f.y<600); bombs=bombs.filter(b=>b.y<600);
  level = Math.floor(score/15)+1;
  if(level>1 && level%5===0 && bosses.length<1) spawnBoss();
  if(cat.shield){ cat.shieldTimer--; if(cat.shieldTimer<=0) cat.shield=false; }
  if(cat.speedBoost){ cat.speedTimer--; if(cat.speedTimer<=0){ cat.speedBoost=false; cat.speed=6; } }
  for(const b of bosses) b.y+=b.speed; bosses=bosses.filter(b=>b.y<600);
  for(const p of particles){ p.x+=p.dx; p.y+=p.dy; p.dy+=0.1; p.life--; }
  particles=particles.filter(p=>p.life>0);
  for(const s of scoreAnims){ s.y-=0.5; s.life--; }
  scoreAnims=scoreAnims.filter(s=>s.life>0);
}

function draw(){
  ctx.clearRect(0,0,400,600);
  ctx.drawImage(catImage, cat.x, cat.y, cat.w, cat.h);

  ctx.font = "28px 'Segoe UI Emoji', 'Apple Color Emoji', 'Noto Color Emoji', sans-serif";
  for(const f of foods) ctx.fillText(f.emoji,f.x,f.y);
  for(const b of bombs) ctx.fillText(b.emoji,b.x,b.y);
  for(const b of bosses) ctx.fillText(b.emoji,b.x,b.y);

  ctx.font="20px 'Segoe UI Emoji', 'Apple Color Emoji', 'Noto Color Emoji', sans-serif";
  for(const p of particles) ctx.fillText(p.symbol,p.x,p.y);
  for(const s of scoreAnims){ ctx.fillStyle="#ff0000"; ctx.fillText(s.text,s.x,s.y); }

  ctx.fillStyle="#333";
  ctx.font="16px sans-serif";
  ctx.fillText("Skor: "+score,10,20);
  ctx.fillText("Nyawa: "+lives,320,20);
  ctx.fillText("Level: "+level,170,20);
}

function checkCollisions(){
  for(let i=foods.length-1;i>=0;i--){
    const f=foods[i];
    if(f.y>500 && f.x>cat.x-20 && f.x<cat.x+cat.w){
      if(f.type==="shield"){ cat.shield=true; cat.shieldTimer=300; eatSound.play(); spawnParticles(f.x,f.y,"shield"); spawnScoreAnim(f.x,f.y,"üõ°Ô∏è Shield!"); }
      else if(f.type==="speed"){ cat.speedBoost=true; cat.speed=10; cat.speedTimer=300; eatSound.play(); spawnParticles(f.x,f.y,"speed"); spawnScoreAnim(f.x,f.y,"‚ö° Speed!"); }
      else if(f.type==="point" && f.emoji==="‚≠ê" && cat.shield){
        score += f.points*2;
        spawnScoreAnim(f.x,f.y,"‚ú® DOUBLE ‚ú®");
        eatSound.play(); spawnParticles(f.x,f.y,"point");
        comboSound.currentTime = 0; comboSound.play();
      }
      else { score+=f.points; lives+=f.life; if(f.points>0||f.life>0) eatSound.play(); else hitSound.play(); spawnParticles(f.x,f.y,f.type); spawnScoreAnim(f.x,f.y,(f.points>0?'+'+f.points:f.points)+(f.life>0?'+'+f.life+' nyawa':'')); }
      foods.splice(i,1);
      if(lives<=0) gameOver();
    }
  }
  for(let i=bombs.length-1;i>=0;i--){ const b=bombs[i]; if(b.y>500 && b.x>cat.x-20 && b.x<cat.x+cat.w){ if(!cat.shield){ spawnParticles(cat.x+30,cat.y,"bomb"); shakeScreen(); gameOver(); } else { bombs.splice(i,1); } } }
  for(let i=bosses.length-1;i>=0;i--){ const b=bosses[i]; if(b.y>500 && b.x<cat.x+cat.w && b.x+b.w>cat.x){ lives-=2; bosses.splice(i,1); hitSound.play(); spawnParticles(cat.x+30,cat.y,"hit"); shakeScreen(); spawnScoreAnim(cat.x+30,cat.y,"-2"); if(lives<=0) gameOver(); } }
}

function shakeScreen(){ canvas.classList.remove("shake"); void canvas.offsetWidth; canvas.classList.add("shake"); }
function loop(){ if(!running) return; update(); draw(); checkCollisions(); requestAnimationFrame(loop); }
function gameOver(){ running=false; bgm.pause(); const overlay=document.getElementById("overlay"); overlay.style.display="flex"; document.getElementById("msg").innerHTML=`Game Over üí•<br/>Skor: ${score}<br/>Level: ${level}`; }

window.addEventListener("mousemove",e=>{ const rect=canvas.getBoundingClientRect(); cat.x=e.clientX-rect.left-cat.w/2; });
window.addEventListener("touchmove",e=>{ cat.x=e.touches[0].clientX-cat.w/2; });
</script>
</body>
</html>
